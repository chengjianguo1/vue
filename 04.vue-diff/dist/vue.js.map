{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parse.js","../src/compiler/index.js","../src/util.js","../src/global-api/index.js","../src/observer/dep.js","../src/observer/schedular.js","../src/observer/watcher.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/render.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i]; // name,value\n        if (attr.name === 'style') {\n            let obj = {};\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value\n            });\n            attr.value = obj; // {style:{color:red}}\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},` // {a:'aaa',a:1,b:2,}\n    }\n    return `{${str.slice(0,-1)}}`;\n}\n\nfunction genChildren(el) {\n    const children  = el.children;\n    if(children){\n        return children.map(child=>gen(child)).join(',')\n    }\n}\nfunction gen(node){ // 区分是元素 还是文本\n    if(node.type == 1){\n        return generate(node);\n    }else{\n        //文本 逻辑不能用 _c来处理\n        // 有{{}} 普通文本  混合文本 {{aa}} aaa {{bbb}} ccc\n        let text =  node.text;\n        if(defaultTagRE.test(text)){ // _v(_s(name) + 'aa' + _s(age) + '哈哈'）\n            let tokens = [];\n            let match ;\n            let index = 0;\n            let lastIndex = defaultTagRE.lastIndex = 0;\n            while(match = defaultTagRE.exec(text)){ // aa {{ age }} haha \n                index = match.index;\n                if(index >lastIndex){\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n                }\n                tokens.push(`_s(${match[1].trim()})`);\n                lastIndex = index + match[0].length;\n            }\n            if(lastIndex < text.length){\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\n            }\n            return  `_v(${tokens.join('+')})`\n\n            // 是带有{{}}\n        }else{\n            return `_v(${JSON.stringify(text)})`\n        }\n    }\n}\nexport function generate(el) {\n    // console.log(el); // 转换成render代码\n    let children = genChildren(el);\n    let code = `_c('${el.tag}',${\n        el.attrs.length? genProps(el.attrs):'undefined'\n    } ${\n        children? (',' + children) : ''\n    })`;\n    // => js代码 html=> js代码  字符串拼接\n    return code;\n}\n\n\n/* \n<div id=\"app\" a=1 b=2>\n    <span style\"=color:red\">{{name}} <a>hello</a></span>\n</div> \n _c(\n    'div',{id:'app',a:1,b:2}\n    ,_c(\n        'span',\n        {style:{color:'red'}}\n        ,_s(_v(name)),\n        _c(a,undefined,_v('hello'))\n        )\n)\n*/","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // aa-aa \nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //aa:aa\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 可以匹配到标签名  [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //[0] 标签的结束名字\n//    style=\"xxx\"   style='xxx'  style=xxx\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst startTagClose = /^\\s*(\\/?)>/;\n\n\n\nexport function parseHTML(html) { // <\n    function createASTElement(tag, attrs) { // vue3里面支持多个根元素 (外层加了一个空元素) vue2中只有一个根节点\n        return {\n            tag,\n            type: 1,\n            children: [],\n            attrs,\n            parent: null\n        }\n    }\n    let root = null;\n    let currentParent;\n    let stack = [];\n\n    // 根据开始标签 结束标签 文本内容 生成一个ast语法树\n    function start(tagName, attrs) { // [div]\n        let element = createASTElement(tagName, attrs);\n        if (!root) {\n            root = element;\n        }\n        currentParent = element // div>span>a   div  span\n        stack.push(element)\n    }\n\n    function end(tagName) {\n        let element = stack.pop();\n        currentParent = stack[stack.length - 1];\n        if (currentParent) {\n            element.parent = currentParent;\n            currentParent.children.push(element)\n        }\n    }\n\n    function chars(text) {\n        text = text.replace(/\\s/g, '');\n        if (text) {\n            currentParent.children.push({\n                type: 3,\n                text\n            })\n        }\n    }\n\n    function advance(n) {\n        html = html.substring(n)\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            let match = {\n                tagName: start[1],\n                attrs: []\n            };\n            advance(start[0].length); // 获取元素 \n            // 查找属性\n            let end, attr;\n            //不是开头标签结尾就一直解析\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                advance(attr[0].length); // a=1 a=\"1\" a='1'\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true });\n            }\n            if (end) {\n                advance(end[0].length);\n                return match\n            }\n        }\n    }\n    while (html) {\n        let textEnd = html.indexOf('<');\n        if (textEnd == 0) {\n            let startTagMatch = parseStartTag();\n            if (startTagMatch) { // 开始标签\n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue;\n            }\n            // 结束标签 \n            let endTagMatch = html.match(endTag);\n            if (endTagMatch) {\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]);\n                continue;\n            }\n        }\n        let text;\n        if (textEnd > 0) { // 开始解析文本\n            text = html.substring(0, textEnd)\n        }\n        if (text) {\n            advance(text.length);\n            chars(text);\n        }\n    }\n\n    return root;\n}","import { generate } from \"./generate\";\nimport { parseHTML } from \"./parse\";\n\nexport function compileToFunctions(template) {\n    let ast = parseHTML(template);\n    // root\n    let code = generate(ast); // 生成代码\n\n    let render = `with(this){return ${code}}`\n\n    let fn = new Function(render); // 可以让字符串变成一个函数\n    \n    return fn; // render 函数已经ok了\n}\n\n\n","let callbacks = [];\nlet waiting = false;\n\nfunction flushCallbacks() {\n    for (let i = 0; i < callbacks.length; i++) {\n        let callback = callbacks[i];\n        callback();\n    }\n    waiting = false;\n    callbacks = [];\n}\n// 批处理 第一次开定时器 ，后续只更新列表 ，之后执行清空逻辑\n\n// 1.第一次cb渲染watcher更新操作  （渲染watcher执行的过程肯定是同步的）\n// 2.第二次cb 用户传入的回调\nexport function nextTick(cb) {\n    callbacks.push(cb); // 默认的cb 是渲染逻辑 用户的逻辑放到渲染逻辑之后即可\n    if (!waiting) {\n        waiting = true;\n        // 1.promise先看支持不支持 \n        // 2.mutationObserver\n        // 3.setImmdiate\n        // 4.setTimeout  Vue3 next-tick就直接用了promise\n        Promise.resolve().then(flushCallbacks); // 多次调用nextTick 只会开启一个promise\n    }\n}\n\n// nextTick 肯定有异步功能\n\n\nexport const isObject = (val) => typeof val == 'object' && val != null;\nconst LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted'\n]\n\nconst strats = {};\n\nfunction mergeHook(parentVal, childVal) {\n    if (childVal) { // 如果\n        if (parentVal) {\n            return parentVal.concat(childVal);\n        } else { // 如果儿子有父亲没有\n            return [childVal]\n        }\n    } else {\n        return parentVal; // 儿子没有直接采用父亲\n    }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n    strats[hook] = mergeHook\n})\nstrats.components = function(parantVal, childVal) {\n    const res = Object.create(parantVal);\n    if (childVal) {\n        for (let key in childVal) {\n            res[key] = childVal[key];\n        }\n    }\n    return res;\n}\nexport function mergeOptions(parent, child) {\n    const options = {};\n    // {a:1}  {a:2}  => {a:2}\n    // {a:1}  {}  => {a:1}\n    // 自定义的策略\n    // 1.如果父亲有的儿子也有，应该用儿子替换父亲\n    // 2.如果父亲有值儿子没有，用父亲的\n    for (let key in parent) {\n        mergeField(key)\n    }\n    for (let key in child) {\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key);\n        }\n    }\n\n    function mergeField(key) {\n        // 策略模式\n        if (strats[key]) {\n            return options[key] = strats[key](parent[key], child[key]);\n        }\n        if (isObject(parent[key]) && isObject(child[key])) {\n            options[key] = { ...parent[key], ...child[key] }\n        } else {\n            if (child[key]) { // 如果儿子有值\n                options[key] = child[key];\n            } else {\n                options[key] = parent[key];\n            }\n        }\n    }\n    return options;\n}\n\n\nfunction makeUp(str) {\n    const map = {}\n    str.split(',').forEach(tagName => {\n        map[tagName] = true;\n    })\n    return (tag) => map[tag] || false\n}\n\nexport const isReservedTag = makeUp('a,p,div,ul,li,span,input,button,b')","import { mergeOptions } from \"../util\";\n\nexport function initGlobalAPI(Vue){\n    Vue.options = {}; // 用来存储全局的配置\n    // filter directive component\n    Vue.mixin = function (mixin) {\n        // mergeOptions\n        this.options = mergeOptions(this.options,mixin);\n        return this;\n    }\n    Vue.options._base = Vue; // Vue的构造函数 后面会用到\n    Vue.options.components = {}; // 用来存放组件的定义\n    Vue.component = function (id,definition) {\n        definition.name = definition.name || id;\n        definition = this.options._base.extend(definition); // 通过对象产生一个构造函数\n        this.options.components[id] = definition;\n        console.log(this.options)\n    }\n    let cid = 0;\n    Vue.extend = function (options) { // 子组件初始化时会\n        //  new VueComponent(options)\n        const Super = this;\n        const Sub = function VueComponent(options){\n            this._init(options);\n        }\n        Sub.cid = cid++;\n        Sub.prototype = Object.create(Super.prototype);// 都是通过Vue继承来的\n        Sub.prototype.constructor = Sub;\n        Sub.component = Super.component;\n        // ... 每次声明一个组件 都会把父级的定义放在自己的身上\n        Sub.options = mergeOptions(\n            Super.options,\n            options)\n        return Sub;// 这个构造函数是由对象产生而来的\n    }\n    // 手写dom-diff算法  看vue2源码\n}\n\n","// 我们可以把当前的watcher 放到一个全局变量上\nlet id = 0;\nclass Dep{\n    constructor(){\n        this.id = id++;\n        this.subs = []; // 属性要记住watcher\n    }\n    depend(){\n        // 让watcher 记住dep\n        Dep.target.addDep(this);  \n    }\n    addSub(watcher){ // 存储watcher\n        this.subs.push(watcher)\n    }\n    notify(){\n        this.subs.forEach(watcher => watcher.update());\n    }\n}\nDep.target = null;\nexport function pushTarget(watcher){\n    Dep.target = watcher;\n}\nexport function popTarget(){\n    Dep.target = null;\n}\n\n\nexport default Dep;","import { nextTick } from \"../util\";\n\nlet has = {};\nlet queue = [];\nlet pending  = false;\nfunction flushSchedularQueue(){\n    for(let i = 0; i < queue.length;i++){\n        let watcher = queue[i];\n        watcher.run();\n    }\n    queue = [];\n    has = {};\n    pending = false;\n}\n// 多次调用queuewatcher 如果watcher不是同一个\nexport function queueWatcher(watcher) { // 调度更新几次\n    // 更新时对watcher进行去重操作\n    let id = watcher.id;\n    if(has[id] == null){ // 没有id \n        queue.push(watcher);\n        has[id] = true;\n        // 让queue 清空ss\n        if(!pending){\n            pending = true;\n            nextTick(flushSchedularQueue);\n        }\n    }\n}\n","import { popTarget, pushTarget } from \"./dep\";\nimport {queueWatcher} from './schedular'\nlet id = 0;\nclass Watcher {\n    constructor(vm, exprOrFn, cb, options) {\n        this.vm = vm;\n        this.cb = cb;\n        this.options = options;\n        this.id = id++;\n        this.getter = exprOrFn;\n        this.deps = [];\n        this.depsId = new Set();\n\n        this.get(); // 调用传入的函数， 调用了render方法， 此时会对模板中的数据进行取值\n    }\n    get() { // 这个方法中会对属性进行取值操作\n        pushTarget(this); // Dep.target = watcher\n        this.getter(); // 会取值  vm__update(vm._render())\n        popTarget(); // Dep.target = null\n    }\n    addDep(dep) {\n        let id = dep.id;\n        if (!this.depsId.has(id)) { // dep 是非重复的，watcher肯定也不会重\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n    run(){\n        this.get();\n    }\n    update() { // 如果多次更改 我希望合并成一次  （防抖）\n        // this.get(); // 不停的重新渲染\n        queueWatcher(this);\n    }\n    // 当属性取值时 需要记住这个watcher，稍后数据变化了，去执行自己记住的watcher即可\n}\n\n\nexport default Watcher;","import { isObject, isReservedTag } from \"../util\";\n\nexport function createElement(vm, tag, data = {}, ...children) {\n\n    // 需要对标签名做过滤 因为有可能标签名是一个自定义组件\n    if (isReservedTag(tag)) {\n        return vnode(vm, tag, data, data.key, children, undefined);\n    } else {\n        // 组件\n        const Ctor = vm.$options.components[tag]; // 对象或者函数\n        // Vue.extend\n        return createComponent(vm, tag, data, data.key, children, Ctor)\n    }\n}\n\nfunction createComponent(vm, tag, data, key, children, Ctor) {\n    if (isObject(Ctor)) {\n        Ctor = vm.$options._base.extend(Ctor);\n    }\n    // 给组件增加生命周期\n    data.hook = {\n        init(vnode) {\n            // 调用子组件的构造函数\n            let child = vnode.componentInstance = new vnode.componentOptions.Ctor({});\n            child.$mount(); // 手动挂在  vnode.componentInstance.$el = 真实的元素\n        } // 初始化的钩子\n    }\n    // 组件的虚拟节点拥有hook和当前组件的componentOptions  中存放了组件的构造函数\n    return vnode(vm, `vue-component-${Ctor.cid}-${tag}`, data, key, undefined, undefined, { Ctor });\n}\n\nexport function createTextVnode(vm, text) {\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\nfunction vnode(vm, tag, data, key, children, text, componentOptions) {\n    return {\n        vm,\n        tag,\n        children,\n        data,\n        key,\n        text,\n        componentOptions\n    }\n}\n\nexport function isSameVnode(oldVnode, newVNode) {\n    return (oldVnode.tag === newVNode.tag) && (oldVnode.key === newVNode.key)\n}","import { isSameVnode } from './index'\nexport function patch(oldVnode, vnode) {\n    // oldVnode 是一个真实的元素\n    // 1. 组件oldVnode是null  $mount()\n    if (!oldVnode) {\n        return createElm(vnode); // 根据虚拟节点创建元素\n    }\n\n    const isRealElement = oldVnode.nodeType\n    // 2.初次渲染 oldVnode  是一个真实dom\n    if (isRealElement) {\n        // 初次渲染\n        const oldElm = oldVnode; // id=\"app\"\n        const parentElm = oldElm.parentNode; // body\n        let el = createElm(vnode);\n        parentElm.insertBefore(el, oldElm.nextSibling); // 将创建的节点查到原有的节点的下一个\n        parentElm.removeChild(oldElm);\n        return el; // vm.$el\n    } else {\n        // 3.diff算法 两个虚拟节点的比对\n        // 1.如果两个虚拟节点的标签不一致 那就直接替换掉就结束 \n        // div=>p\n        if (oldVnode.tag !== vnode.tag) {\n            return oldVnode.el.parentNode.replaceChild(createElm(vnode), oldVnode.el)\n        }\n\n        // 2.标签一样但是时两个文本元素 {tag:undefined,text}  {tag:undefined,text} \n        if (!oldVnode.tag) { // 标签相同而且是文本 \n            if (oldVnode.text !== vnode.text) {\n                return oldVnode.el.textContent = vnode.text\n            }\n        }\n\n        // 3.元素相同, 复用老节点，并且更新属性 \n        let el = vnode.el = oldVnode.el;\n        // 用老的属性和新的虚拟节点进行比对\n        updateProperties(vnode, oldVnode.data);\n\n\n        // 4.更新儿子\n\n        let oldChildren = oldVnode.children || [];\n        let newChildren = vnode.children || [];\n\n        if (oldChildren.length > 0 && newChildren.length > 0) {\n            //  1.老的有儿子新的也有儿子 dom-diff\n            updateChildren(el, oldChildren, newChildren);\n        } else if (oldChildren.length > 0) { // 2.老的有儿子 新的没儿子 => 删除老儿子\n            el.innerHTML = ''; // 清空 删除所有节点\n        } else if (newChildren.length > 0) { // 3.新的有儿子 老的没儿子  => 在老节点上面增加儿子即可\n            newChildren.forEach(child => el.appendChild(createElm(child)));\n        }\n        // ABCDF\n        // NACBE\n    }\n}\n\n\nfunction updateChildren(parent, oldChildren, newChildren) {\n\n    let oldStartIndex = 0; // 老的头索引\n    let oldEndIndex = oldChildren.length - 1; // 老的尾索引\n    let oldStartVnode = oldChildren[0]; // 老的开始节点\n    let oldEndVnode = oldChildren[oldEndIndex]; // 老的结束节点\n\n    let newStartIndex = 0; // 新的头索引\n    let newEndIndex = newChildren.length - 1; // 新的尾索引\n    let newStartVnode = newChildren[0]; // 新的开始节点\n    let newEndVnode = newChildren[newEndIndex]; // 新的结束节点\n\n    function makeIndexByKey(oldChildren){\n        let map = {};\n        oldChildren.forEach((item,index)=>{\n            map[item.key] = index; // {A:0,B:1,C:2,}\n        });\n        return map\n    }\n\n    let map = makeIndexByKey(oldChildren);\n\n    while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n        // 1.前端中比较常见的操作有 像尾部插入 头部插入 头移动到尾部 尾部移动头部，正序和反序\n        // 1) 向后插入的操作\n        if(!oldStartVnode){\n            oldStartVnode = oldChildren[++oldStartIndex]\n        }else if(!oldEndVnode){\n            oldEndVnode = oldChildren[--oldEndIndex];\n        }else if (isSameVnode(oldStartVnode, newStartVnode)) {\n            patch(oldStartVnode, newStartVnode); // 递归比对节点\n            oldStartVnode = oldChildren[++oldStartIndex];\n            newStartVnode = newChildren[++newStartIndex];\n        }else if(isSameVnode(oldEndVnode,newEndVnode)){ // // 2.向前插入\n            patch(oldEndVnode,newEndVnode);\n            oldEndVnode = oldChildren[--oldEndIndex];\n            newEndVnode = newChildren[--newEndIndex];\n        }\n        else if(isSameVnode(oldStartVnode,newEndVnode)){ // 头移动到尾部\n            patch(oldStartVnode,newEndVnode);\n            // dom 操作时具备移动性的 会移动系欸但\n            parent.insertBefore(oldStartVnode.el,oldEndVnode.el.nextSibling);\n            oldStartVnode = oldChildren[++oldStartIndex];\n            newEndVnode = newChildren[--newEndIndex];\n        }else if(isSameVnode(oldEndVnode,newStartVnode)){\n            patch(oldEndVnode,newStartVnode);\n            parent.insertBefore(oldEndVnode.el,oldStartVnode.el);\n            oldEndVnode = oldChildren[--oldEndIndex];\n            newStartVnode = newChildren[++newStartIndex]\n        }else{\n            // 1.需要先查找当前 老节点索引和key的关系\n            // 移动的时候通过新的key 去找对应的老节点索引 =》 获取老节点，可以移动老节点\n            let moveIndex = map[newStartVnode.key];\n            if(moveIndex == undefined){\n                parent.insertBefore(createElm(newStartVnode),oldStartVnode.el);\n            }else{\n                let moveVnode = oldChildren[moveIndex];\n                oldChildren[moveIndex] = undefined;\n                patch(moveVnode,newStartVnode); // 如果找到了 需要两个虚拟节点比对\n                parent.insertBefore(moveVnode.el,oldStartVnode.el)\n            }\n            newStartVnode = newChildren[++newStartIndex];\n        }\n        // 为什么v-for要增加key属性,key为什么不能用index\n    }\n    if (newStartIndex <= newEndIndex) {  // 新的比老的多 ，插入新节点\n        for (let i = newStartIndex; i <= newEndIndex; i++) {\n            // 向前插入 向后插入\n            // 看一眼newEndIndex 下一个节点有没有值\n            let nextEle = newChildren[newEndIndex+1] == null? null:  newChildren[newEndIndex+1].el;\n            // appendChild 和 insertBefore 也可以进行合并\n            // 如果insertBefore 传入null 等价于appendChild\n            parent.insertBefore(createElm(newChildren[i]),nextEle)\n            // parent.appendChild(createElm(newChildren[i]));\n        }\n    }\n    if(oldStartIndex <= oldEndIndex){\n        for(let i = oldStartIndex; i<=oldEndIndex;i++){\n            let child = oldChildren[i];\n            if(child != undefined){\n                parent.removeChild(child.el); // 用父亲移除儿子即可\n            }\n        }\n    }\n}\n\nfunction updateProperties(vnode, oldProps = {}) {\n    let newProps = vnode.data || {}; // 属性\n    let el = vnode.el; // dom元素\n    // 1.老的属性 新的没有  删除属性\n    for (let key in oldProps) {\n        if (!newProps[key]) {\n            el.removeAttribute(key);\n        }\n    }\n    let newStyle = newProps.style || {}; // {color:blue}\n    let oldStyle = oldProps.style || {} // {background:red}\n    for (let key in oldStyle) { // 判断样式根据 新老先比对一下\n        if (!newStyle[key]) {\n            el.style[key] = ''\n        }\n    }\n    // 2.新的属性老的没有 , 直接用新的覆盖 不考虑有没有\n    for (let key in newProps) {\n        if (key == 'style') {\n            for (let styleName in newProps.style) {\n                el.style[styleName] = newProps.style[styleName]\n            }\n        } else if (key === 'class') {\n            el.className = newProps.class\n        } else {\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}\n\nfunction createComponent(vnode) {\n    let i = vnode.data;\n    if ((i = i.hook) && (i = i.init)) {\n        i(vnode); // 调用组件的初始化方法 // vnode.componentInstance.$el\n    }\n    if (vnode.componentInstance) { // 如果虚拟节点上有组件的实例说明当前这个vode是组件\n        return true;\n    }\n    return false;\n}\n\nexport function createElm(vnode) { // 根据虚拟节点创建真实的节点\n    let { tag, children, key, data, text, vm } = vnode;\n    if (typeof tag === 'string') { // 两种可能 可能是一个组件\n        // 可能是组件, 如果是组件 就直接根据组件创建出组件对应的真实节点\n        if (createComponent(vnode)) {\n            // 如果返回true 说明这个虚拟节点是组件\n            // 如果是组件，就将组件渲染后的真实元素给我\n            return vnode.componentInstance.$el\n        }\n        vnode.el = document.createElement(tag); // 用vue的指令时 可以通过vnode拿到真实dom\n        updateProperties(vnode);\n        children.forEach(child => { // 如果有儿子节点，就进行递归操作\n            vnode.el.appendChild(createElm(child))\n        })\n    } else {\n        vnode.el = document.createTextNode(text)\n    }\n\n    return vnode.el;\n}","import Watcher from \"./observer/watcher\"\nimport { patch } from './vdom/patch'\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function(vnode) {\n        // 将虚拟节点转换成真实的dom\n        const vm = this;\n        // 首次渲染 需要用虚拟节点 来更新真实的dom元素\n\n        // 初始化渲染的时候 会创建一个新节点并且将老节点删掉\n       \n        // 1.第一次渲染完毕后 拿到新的节点，下次再次渲染时替换上次渲染的结果\n\n\n        // 第一次初始化 第二次走diff算法\n        const prevVnode = vm._vnode; // 先取上一次的vnode 看一下是否有\n        vm._vnode = vnode // 保存上一次的虚拟节点\n        if(!prevVnode){\n            vm.$el = patch(vm.$el, vnode); // 组件调用patch方法会产生$el属性\n        }else{\n            vm.$el = patch(prevVnode,vnode);\n        }\n       \n    }\n}\n\nexport function callHook(vm,hook){ // 发布模式\n    const handlers = vm.$options[hook];\n    if(handlers){\n        handlers.forEach(handler=>handler.call(vm));\n    }\n}\n\n\nexport function mountComponent(vm) {\n    // 默认vue是通过watcher来进行渲染  = 渲染watcher （每一个组件都有一个渲染watcher）\n\n    let updateComponent = () => {\n        vm._update(vm._render()); // 虚拟节点\n    }\n    new Watcher(vm, updateComponent, () => {}, true); // updateComponent();\n}","let oldArrayProtoMethods = Array.prototype;\n\n// 不能直接改写数组原有方法 不可靠，因为只有被vue控制的数组才需要改写\n\nexport let arrayMethods = Object.create(Array.prototype)\nlet methods = [ // concat slice ... 都不能改变原数组\n    'push',\n    'pop',\n    'shift',\n    'unshift',\n    'splice',\n    'reverse',\n    'sort'\n];\n\nmethods.forEach(method=>{   // AOP切片编程\n    arrayMethods[method] = function (...args) { // 重写数组方法\n        // todo ...\n        // 有可能用户新增的数据时对象格式 也需要进行拦截\n        let result = oldArrayProtoMethods[method].call(this,...args);\n        let inserted;\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                inserted = args;\n                break;\n            case 'splice': // splice(0,1,xxxx)\n                inserted = args.slice(2);\n            default:\n                break;\n        }\n        if(inserted)  ob.observeArray(inserted);\n        ob.dep.notify();\n        return result;\n    }\n})\n\n// arrayMethods.push({a:1})","import { arrayMethods } from \"./array\";\nimport Dep from \"./dep\";\n\nclass Observer {\n    constructor(value) { // 需要对这个value属性重新定义  \n        // value可能是对象 可能是数组，分类来处理\n        // value.__ob__ = this; \n        this.dep = new Dep(); // 给数组本身和对象本身增加一个dep属性\n        Object.defineProperty(value,'__ob__',{\n            value:this,\n            enumerable:false, // 不能被枚举表示 不能被循环\n            configurable:false,// 不能删除此属性\n        })\n        if(Array.isArray(value)){\n            // 数组不用defineProperty来进行代理 性能不好\n            // push shift reverse sort  我要重写这些方法增加更新逻辑\n            Object.setPrototypeOf(value,arrayMethods); // 循环将属性赋予上去\n            this.observeArray(value); // 原有数组中的对象  Object.freeze()\n        }else{\n            this.walk(value);\n        }\n    }\n    observeArray(value){\n        for(let i = 0; i < value.length;i++){ // 如果数组中是对象的话，就会去递归观测，观测的时候回增加__ob__属性\n            observe(value[i]);\n        }\n    }\n    walk(data) {\n        // 将对象中的所有key 重新用defineProperty定义成响应式的\n        Object.keys(data).forEach((key) => {\n            defineReactive(data, key, data[key]);\n        })\n    }\n}\nfunction dependArray(value){ // 就是让里层数组收集外层数组的依赖，这样修改里层数组也可以更新视图 \n    for(let i = 0 ; i < value.length;i++){\n        let current = value[i];\n        current.__ob__ && current.__ob__.dep.depend(); // 让里层的和外层收集的都是同一个watcher\n        if(Array.isArray(current)){\n            dependArray(current);\n        }\n    }\n}\nexport function defineReactive(data, key, value) { // vue2中数据嵌套不要过深 过深浪费性能\n    // value 可能也是一个对象\n    let childOb = observe(value); // 对结果递归拦截\n    let dep = new Dep(); // 每次都会给属性创建一个dep  \n    Object.defineProperty(data,key,{ // 需要给每个属性都增加一个dep\n        get(){ \n            if(Dep.target){\n                dep.depend(); // 让这个属性自己的dep记住这个watcher，也要让watcher记住这个dep\n                // childOb 可能是对象 也可能是数组  \n                if(childOb){ // 如果对数组取值 会将当前的watcher和数组进行关联\n                    childOb.dep.depend();\n                    if(Array.isArray(value)){\n                        dependArray(value);\n                    }\n                }\n            }\n            return value;\n        },\n        set(newValue){\n            if(newValue === value) return;\n            observe(newValue); // 如果用户设置的是一个对象 ， 就继续将用户设置的对象变成响应式的\n            value = newValue;\n\n            dep.notify();// 通知dep中记录的watcher让它去执行\n        }\n    })\n}\nexport function observe(data) {\n    // 只对对象类型进行观测 非对象类型无法观测\n    if (typeof data !== 'object' || data == null) {\n        return;\n    }\n    if(data.__ob__){ // 放置循环引用了\n        return;\n    }\n    // 通过类来对实现对数据的观测 类可以方便扩展，会产生实例\n    return new Observer(data);\n}","import { observe } from \"./observer/index.js\";\n\n// vue的数据 data compunted watch...\nexport function initState(vm){\n    // 将所有数据都定义在 vm属性上，并且后续更改 需要触发视图更新\n    const opts = vm.$options; // 获取用户属性\n    if(opts.data){ // 数据的初始化\n        initData(vm);\n    }\n}\nfunction proxy(vm,source,key){\n    Object.defineProperty(vm,key,{\n        get(){\n            return vm[source][key];\n        },\n        set(newValue){\n            vm[source][key] = newValue\n        }\n    })\n}\nfunction initData(vm){\n    // 数据劫持 Object.defineProperty\n    let data = vm.$options.data;\n    // 对data类型进行判断 如果是函数 获取函数返回值作为对象\n    data = vm._data = typeof data === 'function' ? data.call(vm):data\n\n    // 通过vm._data 获取劫持后的数据，用户就可以拿到_data了\n    // 将_data中的数据全部放到vm上\n    for(let key in data){\n        proxy(vm,'_data',key); // vm.name  => vm._data.nam,e\n    }\n    // 观测这个数据\n    observe(data);\n}","import { debug } from \"webpack\";\nimport { compileToFunctions } from \"./compiler/index.js\";\nimport { callHook, mountComponent } from \"./lifecycle.js\";\nimport { initState } from \"./state\";\nimport { mergeOptions, nextTick } from \"./util.js\";\nexport function initMixin(Vue){\n\n    // vue是如何渲染的 1.ast 2.renders 3.vnode(不应该是my-button)\n\n    Vue.prototype._init = function (options) { // options 是用户传入的对象\n        const vm = this;\n        vm.$options = mergeOptions(vm.constructor.options,options);\n        // vm.$options = options; // 实例上有个属性$options 表示的是用户传入的所有属性\n        // 初始化状态\n        callHook(vm,'beforeCreate');\n        initState(vm);\n        callHook(vm,'created');\n\n        if(vm.$options.el){ // 数据可以挂载到页面上\n            vm.$mount(vm.$options.el);\n        }\n    }\n    Vue.prototype.$nextTick = nextTick\n    Vue.prototype.$mount = function (el) {\n        el = el &&  document.querySelector(el);\n        const vm = this;\n        const options = vm.$options;\n        vm.$el = el;\n        // 如果有render 就直接使用render\n        // 没有render 看有没有template属性\n        // 没有template 就接着找外部模板\n\n        if(!options.render){\n            let template = options.template;\n            if(!template && el){\n                template = el.outerHTML; // 火狐不兼容 document.createElement('div').appendChild('app').innerHTMl\n            }\n            // 如何将模板编译成render函数\n            const render =  compileToFunctions(template); // compileToFunctions\n            options.render = render;\n        }\n        mountComponent(vm);// 组件挂载\n\n    }\n}\n","import { createElement, createTextVnode } from \"./vdom/index.js\"\n\nexport function renderMixin(Vue) {\n    Vue.prototype._c = function(...args) { // 创建元素的虚拟节点\n        return createElement(this,...args);\n    }   \n    Vue.prototype._v = function(text) { // 创建文本的虚拟节点\n        return createTextVnode(this,text);\n    }\n    Vue.prototype._s = function(val) { // 转化成字符串\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val\n    }\n    Vue.prototype._render = function() {\n        // render\n        const vm = this;\n        let render = vm.$options.render; // 获取编译后的render方法\n\n        // 调用render方法产生虚拟节点\n        let vnode = render.call(vm); // _c(xxx,xx,xxx,xxx) 调用时会自动将变量进行取值，将实例结果进行渲染\n\n        return vnode; // 虚拟节点\n\n        // _c('div',{},_c())\n    }\n}","// Vue2.0中就是一个构造函数 class\n\nimport { compileToFunctions } from \"./compiler/index\";\nimport { initGlobalAPI } from \"./global-api/index\";\nimport { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./render\";\nimport { createElm, patch } from \"./vdom/patch\";\n\nfunction Vue(options) {\n    this._init(options); // 当用户new Vue时 就调用init方法进行vue的初始方法\n}\n// 可以拆分逻辑到不同的文件中 更利于代码维护 模块化的概念\n\ninitMixin(Vue); // 扩展初始化方法\nlifecycleMixin(Vue); // 扩展_update方法\nrenderMixin(Vue); // 扩展_render方法\n\n\ninitGlobalAPI(Vue); // 混合全局的api\n\n\n// 我们自己构建两个虚拟dom，之后手动进行比对\n\n// let vm1 = new Vue({\n//     data() {\n//         return { name: 'zf' }\n//     }\n// });\n// // 将模板变成render函数\n// let render1 = compileToFunctions(`<div>\n//    <li key=\"A\" style=\"background:red\">A</li>\n//    <li key=\"B\" style=\"background:yellow\">B</li>\n//    <li key=\"C\" style=\"background:blue\">C</li>\n//    <li key=\"D\" style=\"background:green\">D</li>\n//    <li key=\"F\" style=\"background:pink\">F</li>\n// </div>`); // 将模板编译成render函数\n// let oldVnode = render1.call(vm1); // 老的虚拟节点\n// let el = createElm(oldVnode);\n// document.body.appendChild(el);\n// let vm2 = new Vue({\n//     data() {\n//         return { name: 'jw' }\n//     }\n// })\n// let render2 = compileToFunctions(`<div>\n//    <li key=\"N\" style=\"background:pink\">N</li>\n//    <li key=\"A\" style=\"background:red\">A</li>\n//    <li key=\"C\" style=\"background:blue\">C</li>\n//    <li key=\"B\" style=\"background:yellow\">B</li>\n//    <li key=\"E\" style=\"background:purple\">E</li>\n// </div>`);\n// let newVnode = render2.call(vm2)\n\n// setTimeout(() => {\n//     patch(oldVnode, newVnode); //  包括了初渲染和diff算法的流程\n// }, 2000);\n\n\nexport default Vue\n\n// 库 => rollup  项目开发webpack  "],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","obj","value","split","forEach","item","key","JSON","stringify","slice","genChildren","el","children","map","child","gen","join","node","type","generate","text","test","tokens","match","index","lastIndex","exec","push","trim","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","parent","root","currentParent","stack","start","tagName","element","end","pop","chars","replace","advance","n","substring","parseStartTag","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunctions","template","ast","render","fn","Function","callbacks","waiting","flushCallbacks","callback","nextTick","cb","Promise","resolve","then","isObject","val","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childVal","concat","hook","components","parantVal","res","Object","create","mergeOptions","options","mergeField","hasOwnProperty","makeUp","isReservedTag","initGlobalAPI","Vue","mixin","_base","component","id","definition","extend","console","log","cid","Super","Sub","VueComponent","_init","prototype","constructor","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","has","queue","pending","flushSchedularQueue","run","queueWatcher","Watcher","vm","exprOrFn","getter","deps","depsId","Set","get","dep","add","addSub","createElement","data","vnode","undefined","Ctor","$options","createComponent","init","componentInstance","componentOptions","$mount","createTextVnode","isSameVnode","oldVnode","newVNode","patch","createElm","isRealElement","nodeType","oldElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","oldChildren","newChildren","updateChildren","innerHTML","appendChild","oldStartIndex","oldEndIndex","oldStartVnode","oldEndVnode","newStartIndex","newEndIndex","newStartVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","nextEle","oldProps","newProps","removeAttribute","newStyle","style","oldStyle","styleName","className","class","setAttribute","$el","document","createTextNode","lifecycleMixin","_update","prevVnode","_vnode","callHook","handlers","handler","call","mountComponent","updateComponent","_render","oldArrayProtoMethods","Array","arrayMethods","methods","method","args","result","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","configurable","isArray","setPrototypeOf","walk","observe","keys","defineReactive","dependArray","current","depend","childOb","set","newValue","initState","opts","initData","proxy","source","_data","initMixin","$nextTick","querySelector","outerHTML","renderMixin","_c","_v","_s"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAMA,YAAY,GAAG,0BAArB;;EACA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EACrB,MAAIC,GAAG,GAAG,EAAV;;EACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;EACnC,QAAIE,IAAI,GAAGJ,KAAK,CAACE,CAAD,CAAhB,CADmC;;EAEnC,QAAIE,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;EAAA;EACvB,YAAIC,GAAG,GAAG,EAAV;EACAF,QAAAA,IAAI,CAACG,KAAL,CAAWC,KAAX,CAAiB,GAAjB,EAAsBC,OAAtB,CAA8B,UAAAC,IAAI,EAAI;EAAA,4BACfA,IAAI,CAACF,KAAL,CAAW,GAAX,CADe;EAAA;EAAA,cAC7BG,GAD6B;EAAA,cACxBJ,KADwB;;EAElCD,UAAAA,GAAG,CAACK,GAAD,CAAH,GAAWJ,KAAX;EACH,SAHD;EAIAH,QAAAA,IAAI,CAACG,KAAL,GAAaD,GAAb,CANuB;EAAA;EAO1B;;EACDL,IAAAA,GAAG,cAAOG,IAAI,CAACC,IAAZ,cAAoBO,IAAI,CAACC,SAAL,CAAeT,IAAI,CAACG,KAApB,CAApB,MAAH,CAVmC;EAWtC;;EACD,oBAAWN,GAAG,CAACa,KAAJ,CAAU,CAAV,EAAY,CAAC,CAAb,CAAX;EACH;;EAED,SAASC,WAAT,CAAqBC,EAArB,EAAyB;EACrB,MAAMC,QAAQ,GAAID,EAAE,CAACC,QAArB;;EACA,MAAGA,QAAH,EAAY;EACR,WAAOA,QAAQ,CAACC,GAAT,CAAa,UAAAC,KAAK;EAAA,aAAEC,GAAG,CAACD,KAAD,CAAL;EAAA,KAAlB,EAAgCE,IAAhC,CAAqC,GAArC,CAAP;EACH;EACJ;;EACD,SAASD,GAAT,CAAaE,IAAb,EAAkB;EAAE;EAChB,MAAGA,IAAI,CAACC,IAAL,IAAa,CAAhB,EAAkB;EACd,WAAOC,QAAQ,CAACF,IAAD,CAAf;EACH,GAFD,MAEK;EACD;EACA;EACA,QAAIG,IAAI,GAAIH,IAAI,CAACG,IAAjB;;EACA,QAAG3B,YAAY,CAAC4B,IAAb,CAAkBD,IAAlB,CAAH,EAA2B;EAAE;EACzB,UAAIE,MAAM,GAAG,EAAb;EACA,UAAIC,KAAJ;EACA,UAAIC,KAAK,GAAG,CAAZ;EACA,UAAIC,SAAS,GAAGhC,YAAY,CAACgC,SAAb,GAAyB,CAAzC;;EACA,aAAMF,KAAK,GAAG9B,YAAY,CAACiC,IAAb,CAAkBN,IAAlB,CAAd,EAAsC;EAAE;EACpCI,QAAAA,KAAK,GAAGD,KAAK,CAACC,KAAd;;EACA,YAAGA,KAAK,GAAEC,SAAV,EAAoB;EAChBH,UAAAA,MAAM,CAACK,IAAP,CAAYpB,IAAI,CAACC,SAAL,CAAeY,IAAI,CAACX,KAAL,CAAWgB,SAAX,EAAqBD,KAArB,CAAf,CAAZ;EACH;;EACDF,QAAAA,MAAM,CAACK,IAAP,cAAkBJ,KAAK,CAAC,CAAD,CAAL,CAASK,IAAT,EAAlB;EACAH,QAAAA,SAAS,GAAGD,KAAK,GAAGD,KAAK,CAAC,CAAD,CAAL,CAASzB,MAA7B;EACH;;EACD,UAAG2B,SAAS,GAAGL,IAAI,CAACtB,MAApB,EAA2B;EACvBwB,QAAAA,MAAM,CAACK,IAAP,CAAYpB,IAAI,CAACC,SAAL,CAAeY,IAAI,CAACX,KAAL,CAAWgB,SAAX,CAAf,CAAZ;EACH;;EACD,0BAAcH,MAAM,CAACN,IAAP,CAAY,GAAZ,CAAd,OAhBuB;EAmB1B,KAnBD,MAmBK;EACD,0BAAaT,IAAI,CAACC,SAAL,CAAeY,IAAf,CAAb;EACH;EACJ;EACJ;;EACM,SAASD,QAAT,CAAkBR,EAAlB,EAAsB;EACzB;EACA,MAAIC,QAAQ,GAAGF,WAAW,CAACC,EAAD,CAA1B;EACA,MAAIkB,IAAI,iBAAUlB,EAAE,CAACmB,GAAb,eACJnB,EAAE,CAAChB,KAAH,CAASG,MAAT,GAAiBJ,QAAQ,CAACiB,EAAE,CAAChB,KAAJ,CAAzB,GAAoC,WADhC,cAGJiB,QAAQ,GAAG,MAAMA,QAAT,GAAqB,EAHzB,MAAR,CAHyB;;EASzB,SAAOiB,IAAP;EACH;EAGD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;ECjFA,IAAME,MAAM,iCAAZ;;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,YAAf;EACA;;EACA,IAAMI,SAAS,GAAG,2EAAlB;EACA,IAAMC,aAAa,GAAG,YAAtB;EAIO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;EAAE;EAC9B,WAASC,gBAAT,CAA0BV,GAA1B,EAA+BnC,KAA/B,EAAsC;EAAE;EACpC,WAAO;EACHmC,MAAAA,GAAG,EAAHA,GADG;EAEHZ,MAAAA,IAAI,EAAE,CAFH;EAGHN,MAAAA,QAAQ,EAAE,EAHP;EAIHjB,MAAAA,KAAK,EAALA,KAJG;EAKH8C,MAAAA,MAAM,EAAE;EALL,KAAP;EAOH;;EACD,MAAIC,IAAI,GAAG,IAAX;EACA,MAAIC,aAAJ;EACA,MAAIC,KAAK,GAAG,EAAZ,CAZ4B;;EAe5B,WAASC,KAAT,CAAeC,OAAf,EAAwBnD,KAAxB,EAA+B;EAAE;EAC7B,QAAIoD,OAAO,GAAGP,gBAAgB,CAACM,OAAD,EAAUnD,KAAV,CAA9B;;EACA,QAAI,CAAC+C,IAAL,EAAW;EACPA,MAAAA,IAAI,GAAGK,OAAP;EACH;;EACDJ,IAAAA,aAAa,GAAGI,OAAhB,CAL2B;;EAM3BH,IAAAA,KAAK,CAACjB,IAAN,CAAWoB,OAAX;EACH;;EAED,WAASC,GAAT,CAAaF,OAAb,EAAsB;EAClB,QAAIC,OAAO,GAAGH,KAAK,CAACK,GAAN,EAAd;EACAN,IAAAA,aAAa,GAAGC,KAAK,CAACA,KAAK,CAAC9C,MAAN,GAAe,CAAhB,CAArB;;EACA,QAAI6C,aAAJ,EAAmB;EACfI,MAAAA,OAAO,CAACN,MAAR,GAAiBE,aAAjB;EACAA,MAAAA,aAAa,CAAC/B,QAAd,CAAuBe,IAAvB,CAA4BoB,OAA5B;EACH;EACJ;;EAED,WAASG,KAAT,CAAe9B,IAAf,EAAqB;EACjBA,IAAAA,IAAI,GAAGA,IAAI,CAAC+B,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;;EACA,QAAI/B,IAAJ,EAAU;EACNuB,MAAAA,aAAa,CAAC/B,QAAd,CAAuBe,IAAvB,CAA4B;EACxBT,QAAAA,IAAI,EAAE,CADkB;EAExBE,QAAAA,IAAI,EAAJA;EAFwB,OAA5B;EAIH;EACJ;;EAED,WAASgC,OAAT,CAAiBC,CAAjB,EAAoB;EAChBd,IAAAA,IAAI,GAAGA,IAAI,CAACe,SAAL,CAAeD,CAAf,CAAP;EACH;;EAED,WAASE,aAAT,GAAyB;EACrB,QAAMV,KAAK,GAAGN,IAAI,CAAChB,KAAL,CAAWU,YAAX,CAAd;;EACA,QAAIY,KAAJ,EAAW;EACP,UAAItB,KAAK,GAAG;EACRuB,QAAAA,OAAO,EAAED,KAAK,CAAC,CAAD,CADN;EAERlD,QAAAA,KAAK,EAAE;EAFC,OAAZ;EAIAyD,MAAAA,OAAO,CAACP,KAAK,CAAC,CAAD,CAAL,CAAS/C,MAAV,CAAP,CALO;EAMP;;EACA,UAAIkD,IAAJ,EAASjD,IAAT,CAPO;;;EASP,aAAO,EAAEiD,IAAG,GAAGT,IAAI,CAAChB,KAAL,CAAWc,aAAX,CAAR,MAAuCtC,IAAI,GAAGwC,IAAI,CAAChB,KAAL,CAAWa,SAAX,CAA9C,CAAP,EAA6E;EACzEgB,QAAAA,OAAO,CAACrD,IAAI,CAAC,CAAD,CAAJ,CAAQD,MAAT,CAAP,CADyE;;EAEzEyB,QAAAA,KAAK,CAAC5B,KAAN,CAAYgC,IAAZ,CAAiB;EAAE3B,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CAAZ;EAAiBG,UAAAA,KAAK,EAAEH,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAA1B,IAAiC;EAAzD,SAAjB;EACH;;EACD,UAAIiD,IAAJ,EAAS;EACLI,QAAAA,OAAO,CAACJ,IAAG,CAAC,CAAD,CAAH,CAAOlD,MAAR,CAAP;EACA,eAAOyB,KAAP;EACH;EACJ;EACJ;;EACD,SAAOgB,IAAP,EAAa;EACT,QAAIiB,OAAO,GAAGjB,IAAI,CAACkB,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,IAAI,CAAf,EAAkB;EACd,UAAIE,aAAa,GAAGH,aAAa,EAAjC;;EACA,UAAIG,aAAJ,EAAmB;EAAE;EACjBb,QAAAA,KAAK,CAACa,aAAa,CAACZ,OAAf,EAAwBY,aAAa,CAAC/D,KAAtC,CAAL;EACA;EACH,OALa;;;EAOd,UAAIgE,WAAW,GAAGpB,IAAI,CAAChB,KAAL,CAAWY,MAAX,CAAlB;;EACA,UAAIwB,WAAJ,EAAiB;EACbP,QAAAA,OAAO,CAACO,WAAW,CAAC,CAAD,CAAX,CAAe7D,MAAhB,CAAP;EACAkD,QAAAA,GAAG,CAACW,WAAW,CAAC,CAAD,CAAZ,CAAH;EACA;EACH;EACJ;;EACD,QAAIvC,IAAI,SAAR;;EACA,QAAIoC,OAAO,GAAG,CAAd,EAAiB;EAAE;EACfpC,MAAAA,IAAI,GAAGmB,IAAI,CAACe,SAAL,CAAe,CAAf,EAAkBE,OAAlB,CAAP;EACH;;EACD,QAAIpC,IAAJ,EAAU;EACNgC,MAAAA,OAAO,CAAChC,IAAI,CAACtB,MAAN,CAAP;EACAoD,MAAAA,KAAK,CAAC9B,IAAD,CAAL;EACH;EACJ;;EAED,SAAOsB,IAAP;EACH;;ECtGM,SAASkB,kBAAT,CAA4BC,QAA5B,EAAsC;EACzC,MAAIC,GAAG,GAAGxB,SAAS,CAACuB,QAAD,CAAnB,CADyC;;EAGzC,MAAIhC,IAAI,GAAGV,QAAQ,CAAC2C,GAAD,CAAnB,CAHyC;;EAKzC,MAAIC,MAAM,+BAAwBlC,IAAxB,MAAV;EAEA,MAAImC,EAAE,GAAG,IAAIC,QAAJ,CAAaF,MAAb,CAAT,CAPyC;;EASzC,SAAOC,EAAP,CATyC;EAU5C;;ECbD,IAAIE,SAAS,GAAG,EAAhB;EACA,IAAIC,OAAO,GAAG,KAAd;;EAEA,SAASC,cAAT,GAA0B;EACtB,OAAK,IAAIvE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqE,SAAS,CAACpE,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;EACvC,QAAIwE,QAAQ,GAAGH,SAAS,CAACrE,CAAD,CAAxB;EACAwE,IAAAA,QAAQ;EACX;;EACDF,EAAAA,OAAO,GAAG,KAAV;EACAD,EAAAA,SAAS,GAAG,EAAZ;EACH;EAGD;EACA;;;EACO,SAASI,QAAT,CAAkBC,EAAlB,EAAsB;EACzBL,EAAAA,SAAS,CAACvC,IAAV,CAAe4C,EAAf,EADyB;;EAEzB,MAAI,CAACJ,OAAL,EAAc;EACVA,IAAAA,OAAO,GAAG,IAAV,CADU;EAGV;EACA;EACA;;EACAK,IAAAA,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuBN,cAAvB,EANU;EAOb;EACJ;;EAKM,IAAMO,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD;EAAA,SAAS,QAAOA,GAAP,KAAc,QAAd,IAA0BA,GAAG,IAAI,IAA1C;EAAA,CAAjB;EACP,IAAMC,eAAe,GAAG,CACpB,cADoB,EAEpB,SAFoB,EAGpB,aAHoB,EAIpB,SAJoB,CAAxB;EAOA,IAAMC,MAAM,GAAG,EAAf;;EAEA,SAASC,SAAT,CAAmBC,SAAnB,EAA8BC,QAA9B,EAAwC;EACpC,MAAIA,QAAJ,EAAc;EAAE;EACZ,QAAID,SAAJ,EAAe;EACX,aAAOA,SAAS,CAACE,MAAV,CAAiBD,QAAjB,CAAP;EACH,KAFD,MAEO;EAAE;EACL,aAAO,CAACA,QAAD,CAAP;EACH;EACJ,GAND,MAMO;EACH,WAAOD,SAAP,CADG;EAEN;EACJ;;EACDH,eAAe,CAACzE,OAAhB,CAAwB,UAAA+E,IAAI,EAAI;EAC5BL,EAAAA,MAAM,CAACK,IAAD,CAAN,GAAeJ,SAAf;EACH,CAFD;;EAGAD,MAAM,CAACM,UAAP,GAAoB,UAASC,SAAT,EAAoBJ,QAApB,EAA8B;EAC9C,MAAMK,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAcH,SAAd,CAAZ;;EACA,MAAIJ,QAAJ,EAAc;EACV,SAAK,IAAI3E,GAAT,IAAgB2E,QAAhB,EAA0B;EACtBK,MAAAA,GAAG,CAAChF,GAAD,CAAH,GAAW2E,QAAQ,CAAC3E,GAAD,CAAnB;EACH;EACJ;;EACD,SAAOgF,GAAP;EACH,CARD;;EASO,SAASG,YAAT,CAAsBhD,MAAtB,EAA8B3B,KAA9B,EAAqC;EACxC,MAAM4E,OAAO,GAAG,EAAhB,CADwC;EAGxC;EACA;EACA;EACA;;EACA,OAAK,IAAIpF,GAAT,IAAgBmC,MAAhB,EAAwB;EACpBkD,IAAAA,UAAU,CAACrF,GAAD,CAAV;EACH;;EACD,OAAK,IAAIA,IAAT,IAAgBQ,KAAhB,EAAuB;EACnB,QAAI,CAAC2B,MAAM,CAACmD,cAAP,CAAsBtF,IAAtB,CAAL,EAAiC;EAC7BqF,MAAAA,UAAU,CAACrF,IAAD,CAAV;EACH;EACJ;;EAED,WAASqF,UAAT,CAAoBrF,GAApB,EAAyB;EACrB;EACA,QAAIwE,MAAM,CAACxE,GAAD,CAAV,EAAiB;EACb,aAAOoF,OAAO,CAACpF,GAAD,CAAP,GAAewE,MAAM,CAACxE,GAAD,CAAN,CAAYmC,MAAM,CAACnC,GAAD,CAAlB,EAAyBQ,KAAK,CAACR,GAAD,CAA9B,CAAtB;EACH;;EACD,QAAIqE,QAAQ,CAAClC,MAAM,CAACnC,GAAD,CAAP,CAAR,IAAyBqE,QAAQ,CAAC7D,KAAK,CAACR,GAAD,CAAN,CAArC,EAAmD;EAC/CoF,MAAAA,OAAO,CAACpF,GAAD,CAAP,qCAAoBmC,MAAM,CAACnC,GAAD,CAA1B,GAAoCQ,KAAK,CAACR,GAAD,CAAzC;EACH,KAFD,MAEO;EACH,UAAIQ,KAAK,CAACR,GAAD,CAAT,EAAgB;EAAE;EACdoF,QAAAA,OAAO,CAACpF,GAAD,CAAP,GAAeQ,KAAK,CAACR,GAAD,CAApB;EACH,OAFD,MAEO;EACHoF,QAAAA,OAAO,CAACpF,GAAD,CAAP,GAAemC,MAAM,CAACnC,GAAD,CAArB;EACH;EACJ;EACJ;;EACD,SAAOoF,OAAP;EACH;;EAGD,SAASG,MAAT,CAAgBjG,GAAhB,EAAqB;EACjB,MAAMiB,GAAG,GAAG,EAAZ;EACAjB,EAAAA,GAAG,CAACO,KAAJ,CAAU,GAAV,EAAeC,OAAf,CAAuB,UAAA0C,OAAO,EAAI;EAC9BjC,IAAAA,GAAG,CAACiC,OAAD,CAAH,GAAe,IAAf;EACH,GAFD;EAGA,SAAO,UAAChB,GAAD;EAAA,WAASjB,GAAG,CAACiB,GAAD,CAAH,IAAY,KAArB;EAAA,GAAP;EACH;;EAEM,IAAMgE,aAAa,GAAGD,MAAM,CAAC,mCAAD,CAA5B;;ECxGA,SAASE,aAAT,CAAuBC,GAAvB,EAA2B;EAC9BA,EAAAA,GAAG,CAACN,OAAJ,GAAc,EAAd,CAD8B;EAE9B;;EACAM,EAAAA,GAAG,CAACC,KAAJ,GAAY,UAAUA,KAAV,EAAiB;EACzB;EACA,SAAKP,OAAL,GAAeD,YAAY,CAAC,KAAKC,OAAN,EAAcO,KAAd,CAA3B;EACA,WAAO,IAAP;EACH,GAJD;;EAKAD,EAAAA,GAAG,CAACN,OAAJ,CAAYQ,KAAZ,GAAoBF,GAApB,CAR8B;;EAS9BA,EAAAA,GAAG,CAACN,OAAJ,CAAYN,UAAZ,GAAyB,EAAzB,CAT8B;;EAU9BY,EAAAA,GAAG,CAACG,SAAJ,GAAgB,UAAUC,EAAV,EAAaC,UAAb,EAAyB;EACrCA,IAAAA,UAAU,CAACrG,IAAX,GAAkBqG,UAAU,CAACrG,IAAX,IAAmBoG,EAArC;EACAC,IAAAA,UAAU,GAAG,KAAKX,OAAL,CAAaQ,KAAb,CAAmBI,MAAnB,CAA0BD,UAA1B,CAAb,CAFqC;;EAGrC,SAAKX,OAAL,CAAaN,UAAb,CAAwBgB,EAAxB,IAA8BC,UAA9B;EACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,OAAjB;EACH,GALD;;EAMA,MAAIe,GAAG,GAAG,CAAV;;EACAT,EAAAA,GAAG,CAACM,MAAJ,GAAa,UAAUZ,OAAV,EAAmB;EAAE;EAC9B;EACA,QAAMgB,KAAK,GAAG,IAAd;;EACA,QAAMC,GAAG,GAAG,SAASC,YAAT,CAAsBlB,OAAtB,EAA8B;EACtC,WAAKmB,KAAL,CAAWnB,OAAX;EACH,KAFD;;EAGAiB,IAAAA,GAAG,CAACF,GAAJ,GAAUA,GAAG,EAAb;EACAE,IAAAA,GAAG,CAACG,SAAJ,GAAgBvB,MAAM,CAACC,MAAP,CAAckB,KAAK,CAACI,SAApB,CAAhB,CAP4B;;EAQ5BH,IAAAA,GAAG,CAACG,SAAJ,CAAcC,WAAd,GAA4BJ,GAA5B;EACAA,IAAAA,GAAG,CAACR,SAAJ,GAAgBO,KAAK,CAACP,SAAtB,CAT4B;;EAW5BQ,IAAAA,GAAG,CAACjB,OAAJ,GAAcD,YAAY,CACtBiB,KAAK,CAAChB,OADgB,EAEtBA,OAFsB,CAA1B;EAGA,WAAOiB,GAAP,CAd4B;EAe/B,GAfD,CAjB8B;;EAkCjC;;ECpCD;EACA,IAAIP,EAAE,GAAG,CAAT;;MACMY;EACF,iBAAa;EAAA;;EACT,SAAKZ,EAAL,GAAUA,EAAE,EAAZ;EACA,SAAKa,IAAL,GAAY,EAAZ,CAFS;EAGZ;;;;+BACO;EACJ;EACAD,MAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACH;;;6BACMC,SAAQ;EAAE;EACb,WAAKH,IAAL,CAAUtF,IAAV,CAAeyF,OAAf;EACH;;;+BACO;EACJ,WAAKH,IAAL,CAAU7G,OAAV,CAAkB,UAAAgH,OAAO;EAAA,eAAIA,OAAO,CAACC,MAAR,EAAJ;EAAA,OAAzB;EACH;;;;;;EAELL,GAAG,CAACE,MAAJ,GAAa,IAAb;EACO,SAASI,UAAT,CAAoBF,OAApB,EAA4B;EAC/BJ,EAAAA,GAAG,CAACE,MAAJ,GAAaE,OAAb;EACH;EACM,SAASG,SAAT,GAAoB;EACvBP,EAAAA,GAAG,CAACE,MAAJ,GAAa,IAAb;EACH;;ECtBD,IAAIM,GAAG,GAAG,EAAV;EACA,IAAIC,KAAK,GAAG,EAAZ;EACA,IAAIC,OAAO,GAAI,KAAf;;EACA,SAASC,mBAAT,GAA8B;EAC1B,OAAI,IAAI9H,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG4H,KAAK,CAAC3H,MAAzB,EAAgCD,CAAC,EAAjC,EAAoC;EAChC,QAAIuH,OAAO,GAAGK,KAAK,CAAC5H,CAAD,CAAnB;EACAuH,IAAAA,OAAO,CAACQ,GAAR;EACH;;EACDH,EAAAA,KAAK,GAAG,EAAR;EACAD,EAAAA,GAAG,GAAG,EAAN;EACAE,EAAAA,OAAO,GAAG,KAAV;EACH;;;EAEM,SAASG,YAAT,CAAsBT,OAAtB,EAA+B;EAAE;EACpC;EACA,MAAIhB,EAAE,GAAGgB,OAAO,CAAChB,EAAjB;;EACA,MAAGoB,GAAG,CAACpB,EAAD,CAAH,IAAW,IAAd,EAAmB;EAAE;EACjBqB,IAAAA,KAAK,CAAC9F,IAAN,CAAWyF,OAAX;EACAI,IAAAA,GAAG,CAACpB,EAAD,CAAH,GAAU,IAAV,CAFe;;EAIf,QAAG,CAACsB,OAAJ,EAAY;EACRA,MAAAA,OAAO,GAAG,IAAV;EACApD,MAAAA,QAAQ,CAACqD,mBAAD,CAAR;EACH;EACJ;EACJ;;ECzBD,IAAIvB,IAAE,GAAG,CAAT;;MACM0B;EACF,mBAAYC,EAAZ,EAAgBC,QAAhB,EAA0BzD,EAA1B,EAA8BmB,OAA9B,EAAuC;EAAA;;EACnC,SAAKqC,EAAL,GAAUA,EAAV;EACA,SAAKxD,EAAL,GAAUA,EAAV;EACA,SAAKmB,OAAL,GAAeA,OAAf;EACA,SAAKU,EAAL,GAAUA,IAAE,EAAZ;EACA,SAAK6B,MAAL,GAAcD,QAAd;EACA,SAAKE,IAAL,GAAY,EAAZ;EACA,SAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd;EAEA,SAAKC,GAAL,GATmC;EAUtC;;;;4BACK;EAAE;EACJf,MAAAA,UAAU,CAAC,IAAD,CAAV,CADE;;EAEF,WAAKW,MAAL,GAFE;;EAGFV,MAAAA,SAAS,GAHP;EAIL;;;6BACMe,KAAK;EACR,UAAIlC,EAAE,GAAGkC,GAAG,CAAClC,EAAb;;EACA,UAAI,CAAC,KAAK+B,MAAL,CAAYX,GAAZ,CAAgBpB,EAAhB,CAAL,EAA0B;EAAE;EACxB,aAAK+B,MAAL,CAAYI,GAAZ,CAAgBnC,EAAhB;EACA,aAAK8B,IAAL,CAAUvG,IAAV,CAAe2G,GAAf;EACAA,QAAAA,GAAG,CAACE,MAAJ,CAAW,IAAX;EACH;EACJ;;;4BACI;EACD,WAAKH,GAAL;EACH;;;+BACQ;EAAE;EACP;EACAR,MAAAA,YAAY,CAAC,IAAD,CAAZ;EACH;;;;;;;EChCE,SAASY,aAAT,CAAuBV,EAAvB,EAA2BjG,GAA3B,EAAwD;EAAA,MAAxB4G,IAAwB,uEAAjB,EAAiB;;EAAA,oCAAV9H,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAE3D;EACA,MAAIkF,aAAa,CAAChE,GAAD,CAAjB,EAAwB;EACpB,WAAO6G,KAAK,CAACZ,EAAD,EAAKjG,GAAL,EAAU4G,IAAV,EAAgBA,IAAI,CAACpI,GAArB,EAA0BM,QAA1B,EAAoCgI,SAApC,CAAZ;EACH,GAFD,MAEO;EACH;EACA,QAAMC,IAAI,GAAGd,EAAE,CAACe,QAAH,CAAY1D,UAAZ,CAAuBtD,GAAvB,CAAb,CAFG;EAGH;;EACA,WAAOiH,eAAe,CAAChB,EAAD,EAAKjG,GAAL,EAAU4G,IAAV,EAAgBA,IAAI,CAACpI,GAArB,EAA0BM,QAA1B,EAAoCiI,IAApC,CAAtB;EACH;EACJ;;EAED,SAASE,eAAT,CAAyBhB,EAAzB,EAA6BjG,GAA7B,EAAkC4G,IAAlC,EAAwCpI,GAAxC,EAA6CM,QAA7C,EAAuDiI,IAAvD,EAA6D;EACzD,MAAIlE,QAAQ,CAACkE,IAAD,CAAZ,EAAoB;EAChBA,IAAAA,IAAI,GAAGd,EAAE,CAACe,QAAH,CAAY5C,KAAZ,CAAkBI,MAAlB,CAAyBuC,IAAzB,CAAP;EACH,GAHwD;;;EAKzDH,EAAAA,IAAI,CAACvD,IAAL,GAAY;EACR6D,IAAAA,IADQ,gBACHL,KADG,EACI;EACR;EACA,UAAI7H,KAAK,GAAG6H,KAAK,CAACM,iBAAN,GAA0B,IAAIN,KAAK,CAACO,gBAAN,CAAuBL,IAA3B,CAAgC,EAAhC,CAAtC;EACA/H,MAAAA,KAAK,CAACqI,MAAN,GAHQ;EAIX,KALO;;EAAA,GAAZ,CALyD;;EAazD,SAAOR,KAAK,CAACZ,EAAD,0BAAsBc,IAAI,CAACpC,GAA3B,cAAkC3E,GAAlC,GAAyC4G,IAAzC,EAA+CpI,GAA/C,EAAoDsI,SAApD,EAA+DA,SAA/D,EAA0E;EAAEC,IAAAA,IAAI,EAAJA;EAAF,GAA1E,CAAZ;EACH;;EAEM,SAASO,eAAT,CAAyBrB,EAAzB,EAA6B3G,IAA7B,EAAmC;EACtC,SAAOuH,KAAK,CAACZ,EAAD,EAAKa,SAAL,EAAgBA,SAAhB,EAA2BA,SAA3B,EAAsCA,SAAtC,EAAiDxH,IAAjD,CAAZ;EACH;;EACD,SAASuH,KAAT,CAAeZ,EAAf,EAAmBjG,GAAnB,EAAwB4G,IAAxB,EAA8BpI,GAA9B,EAAmCM,QAAnC,EAA6CQ,IAA7C,EAAmD8H,gBAAnD,EAAqE;EACjE,SAAO;EACHnB,IAAAA,EAAE,EAAFA,EADG;EAEHjG,IAAAA,GAAG,EAAHA,GAFG;EAGHlB,IAAAA,QAAQ,EAARA,QAHG;EAIH8H,IAAAA,IAAI,EAAJA,IAJG;EAKHpI,IAAAA,GAAG,EAAHA,GALG;EAMHc,IAAAA,IAAI,EAAJA,IANG;EAOH8H,IAAAA,gBAAgB,EAAhBA;EAPG,GAAP;EASH;;EAEM,SAASG,WAAT,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;EAC5C,SAAQD,QAAQ,CAACxH,GAAT,KAAiByH,QAAQ,CAACzH,GAA3B,IAAoCwH,QAAQ,CAAChJ,GAAT,KAAiBiJ,QAAQ,CAACjJ,GAArE;EACH;;EC/CM,SAASkJ,KAAT,CAAeF,QAAf,EAAyBX,KAAzB,EAAgC;EACnC;EACA;EACA,MAAI,CAACW,QAAL,EAAe;EACX,WAAOG,SAAS,CAACd,KAAD,CAAhB,CADW;EAEd;;EAED,MAAMe,aAAa,GAAGJ,QAAQ,CAACK,QAA/B,CAPmC;;EASnC,MAAID,aAAJ,EAAmB;EACf;EACA,QAAME,MAAM,GAAGN,QAAf,CAFe;;EAGf,QAAMO,SAAS,GAAGD,MAAM,CAACE,UAAzB,CAHe;;EAIf,QAAInJ,EAAE,GAAG8I,SAAS,CAACd,KAAD,CAAlB;EACAkB,IAAAA,SAAS,CAACE,YAAV,CAAuBpJ,EAAvB,EAA2BiJ,MAAM,CAACI,WAAlC,EALe;;EAMfH,IAAAA,SAAS,CAACI,WAAV,CAAsBL,MAAtB;EACA,WAAOjJ,EAAP,CAPe;EAQlB,GARD,MAQO;EACH;EACA;EACA;EACA,QAAI2I,QAAQ,CAACxH,GAAT,KAAiB6G,KAAK,CAAC7G,GAA3B,EAAgC;EAC5B,aAAOwH,QAAQ,CAAC3I,EAAT,CAAYmJ,UAAZ,CAAuBI,YAAvB,CAAoCT,SAAS,CAACd,KAAD,CAA7C,EAAsDW,QAAQ,CAAC3I,EAA/D,CAAP;EACH,KANE;;;EASH,QAAI,CAAC2I,QAAQ,CAACxH,GAAd,EAAmB;EAAE;EACjB,UAAIwH,QAAQ,CAAClI,IAAT,KAAkBuH,KAAK,CAACvH,IAA5B,EAAkC;EAC9B,eAAOkI,QAAQ,CAAC3I,EAAT,CAAYwJ,WAAZ,GAA0BxB,KAAK,CAACvH,IAAvC;EACH;EACJ,KAbE;;;EAgBH,QAAIT,GAAE,GAAGgI,KAAK,CAAChI,EAAN,GAAW2I,QAAQ,CAAC3I,EAA7B,CAhBG;;;EAkBHyJ,IAAAA,gBAAgB,CAACzB,KAAD,EAAQW,QAAQ,CAACZ,IAAjB,CAAhB,CAlBG;;EAuBH,QAAI2B,WAAW,GAAGf,QAAQ,CAAC1I,QAAT,IAAqB,EAAvC;EACA,QAAI0J,WAAW,GAAG3B,KAAK,CAAC/H,QAAN,IAAkB,EAApC;;EAEA,QAAIyJ,WAAW,CAACvK,MAAZ,GAAqB,CAArB,IAA0BwK,WAAW,CAACxK,MAAZ,GAAqB,CAAnD,EAAsD;EAClD;EACAyK,MAAAA,cAAc,CAAC5J,GAAD,EAAK0J,WAAL,EAAkBC,WAAlB,CAAd;EACH,KAHD,MAGO,IAAID,WAAW,CAACvK,MAAZ,GAAqB,CAAzB,EAA4B;EAAE;EACjCa,MAAAA,GAAE,CAAC6J,SAAH,GAAe,EAAf,CAD+B;EAElC,KAFM,MAEA,IAAIF,WAAW,CAACxK,MAAZ,GAAqB,CAAzB,EAA4B;EAAE;EACjCwK,MAAAA,WAAW,CAAClK,OAAZ,CAAoB,UAAAU,KAAK;EAAA,eAAIH,GAAE,CAAC8J,WAAH,CAAehB,SAAS,CAAC3I,KAAD,CAAxB,CAAJ;EAAA,OAAzB;EACH,KAjCE;EAmCH;;EACH;EACJ;;EAGD,SAASyJ,cAAT,CAAwB9H,MAAxB,EAAgC4H,WAAhC,EAA6CC,WAA7C,EAA0D;EAEtD,MAAII,aAAa,GAAG,CAApB,CAFsD;;EAGtD,MAAIC,WAAW,GAAGN,WAAW,CAACvK,MAAZ,GAAqB,CAAvC,CAHsD;;EAItD,MAAI8K,aAAa,GAAGP,WAAW,CAAC,CAAD,CAA/B,CAJsD;;EAKtD,MAAIQ,WAAW,GAAGR,WAAW,CAACM,WAAD,CAA7B,CALsD;;EAOtD,MAAIG,aAAa,GAAG,CAApB,CAPsD;;EAQtD,MAAIC,WAAW,GAAGT,WAAW,CAACxK,MAAZ,GAAqB,CAAvC,CARsD;;EAStD,MAAIkL,aAAa,GAAGV,WAAW,CAAC,CAAD,CAA/B,CATsD;;EAUtD,MAAIW,WAAW,GAAGX,WAAW,CAACS,WAAD,CAA7B,CAVsD;;EAYtD,WAASG,cAAT,CAAwBb,WAAxB,EAAoC;EAChC,QAAIxJ,GAAG,GAAG,EAAV;EACAwJ,IAAAA,WAAW,CAACjK,OAAZ,CAAoB,UAACC,IAAD,EAAMmB,KAAN,EAAc;EAC9BX,MAAAA,GAAG,CAACR,IAAI,CAACC,GAAN,CAAH,GAAgBkB,KAAhB,CAD8B;EAEjC,KAFD;EAGA,WAAOX,GAAP;EACH;;EAED,MAAIA,GAAG,GAAGqK,cAAc,CAACb,WAAD,CAAxB;;EAEA,SAAOK,aAAa,IAAIC,WAAjB,IAAgCG,aAAa,IAAIC,WAAxD,EAAqE;EACjE;EACA;EACA,QAAG,CAACH,aAAJ,EAAkB;EACdA,MAAAA,aAAa,GAAGP,WAAW,CAAC,EAAEK,aAAH,CAA3B;EACH,KAFD,MAEM,IAAG,CAACG,WAAJ,EAAgB;EAClBA,MAAAA,WAAW,GAAGR,WAAW,CAAC,EAAEM,WAAH,CAAzB;EACH,KAFK,MAEA,IAAItB,WAAW,CAACuB,aAAD,EAAgBI,aAAhB,CAAf,EAA+C;EACjDxB,MAAAA,KAAK,CAACoB,aAAD,EAAgBI,aAAhB,CAAL,CADiD;;EAEjDJ,MAAAA,aAAa,GAAGP,WAAW,CAAC,EAAEK,aAAH,CAA3B;EACAM,MAAAA,aAAa,GAAGV,WAAW,CAAC,EAAEQ,aAAH,CAA3B;EACH,KAJK,MAIA,IAAGzB,WAAW,CAACwB,WAAD,EAAaI,WAAb,CAAd,EAAwC;EAAE;EAC5CzB,MAAAA,KAAK,CAACqB,WAAD,EAAaI,WAAb,CAAL;EACAJ,MAAAA,WAAW,GAAGR,WAAW,CAAC,EAAEM,WAAH,CAAzB;EACAM,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAES,WAAH,CAAzB;EACH,KAJK,MAKD,IAAG1B,WAAW,CAACuB,aAAD,EAAeK,WAAf,CAAd,EAA0C;EAAE;EAC7CzB,MAAAA,KAAK,CAACoB,aAAD,EAAeK,WAAf,CAAL,CAD2C;;EAG3CxI,MAAAA,MAAM,CAACsH,YAAP,CAAoBa,aAAa,CAACjK,EAAlC,EAAqCkK,WAAW,CAAClK,EAAZ,CAAeqJ,WAApD;EACAY,MAAAA,aAAa,GAAGP,WAAW,CAAC,EAAEK,aAAH,CAA3B;EACAO,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAES,WAAH,CAAzB;EACH,KANI,MAMC,IAAG1B,WAAW,CAACwB,WAAD,EAAaG,aAAb,CAAd,EAA0C;EAC5CxB,MAAAA,KAAK,CAACqB,WAAD,EAAaG,aAAb,CAAL;EACAvI,MAAAA,MAAM,CAACsH,YAAP,CAAoBc,WAAW,CAAClK,EAAhC,EAAmCiK,aAAa,CAACjK,EAAjD;EACAkK,MAAAA,WAAW,GAAGR,WAAW,CAAC,EAAEM,WAAH,CAAzB;EACAK,MAAAA,aAAa,GAAGV,WAAW,CAAC,EAAEQ,aAAH,CAA3B;EACH,KALK,MAKD;EACD;EACA;EACA,UAAIK,SAAS,GAAGtK,GAAG,CAACmK,aAAa,CAAC1K,GAAf,CAAnB;;EACA,UAAG6K,SAAS,IAAIvC,SAAhB,EAA0B;EACtBnG,QAAAA,MAAM,CAACsH,YAAP,CAAoBN,SAAS,CAACuB,aAAD,CAA7B,EAA6CJ,aAAa,CAACjK,EAA3D;EACH,OAFD,MAEK;EACD,YAAIyK,SAAS,GAAGf,WAAW,CAACc,SAAD,CAA3B;EACAd,QAAAA,WAAW,CAACc,SAAD,CAAX,GAAyBvC,SAAzB;EACAY,QAAAA,KAAK,CAAC4B,SAAD,EAAWJ,aAAX,CAAL,CAHC;;EAIDvI,QAAAA,MAAM,CAACsH,YAAP,CAAoBqB,SAAS,CAACzK,EAA9B,EAAiCiK,aAAa,CAACjK,EAA/C;EACH;;EACDqK,MAAAA,aAAa,GAAGV,WAAW,CAAC,EAAEQ,aAAH,CAA3B;EACH,KAxCgE;;EA0CpE;;EACD,MAAIA,aAAa,IAAIC,WAArB,EAAkC;EAAG;EACjC,SAAK,IAAIlL,CAAC,GAAGiL,aAAb,EAA4BjL,CAAC,IAAIkL,WAAjC,EAA8ClL,CAAC,EAA/C,EAAmD;EAC/C;EACA;EACA,UAAIwL,OAAO,GAAGf,WAAW,CAACS,WAAW,GAAC,CAAb,CAAX,IAA8B,IAA9B,GAAoC,IAApC,GAA2CT,WAAW,CAACS,WAAW,GAAC,CAAb,CAAX,CAA2BpK,EAApF,CAH+C;EAK/C;;EACA8B,MAAAA,MAAM,CAACsH,YAAP,CAAoBN,SAAS,CAACa,WAAW,CAACzK,CAAD,CAAZ,CAA7B,EAA8CwL,OAA9C,EAN+C;EAQlD;EACJ;;EACD,MAAGX,aAAa,IAAIC,WAApB,EAAgC;EAC5B,SAAI,IAAI9K,EAAC,GAAG6K,aAAZ,EAA2B7K,EAAC,IAAE8K,WAA9B,EAA0C9K,EAAC,EAA3C,EAA8C;EAC1C,UAAIiB,KAAK,GAAGuJ,WAAW,CAACxK,EAAD,CAAvB;;EACA,UAAGiB,KAAK,IAAI8H,SAAZ,EAAsB;EAClBnG,QAAAA,MAAM,CAACwH,WAAP,CAAmBnJ,KAAK,CAACH,EAAzB,EADkB;EAErB;EACJ;EACJ;EACJ;;EAED,SAASyJ,gBAAT,CAA0BzB,KAA1B,EAAgD;EAAA,MAAf2C,QAAe,uEAAJ,EAAI;EAC5C,MAAIC,QAAQ,GAAG5C,KAAK,CAACD,IAAN,IAAc,EAA7B,CAD4C;;EAE5C,MAAI/H,EAAE,GAAGgI,KAAK,CAAChI,EAAf,CAF4C;EAG5C;;EACA,OAAK,IAAIL,GAAT,IAAgBgL,QAAhB,EAA0B;EACtB,QAAI,CAACC,QAAQ,CAACjL,GAAD,CAAb,EAAoB;EAChBK,MAAAA,EAAE,CAAC6K,eAAH,CAAmBlL,GAAnB;EACH;EACJ;;EACD,MAAImL,QAAQ,GAAGF,QAAQ,CAACG,KAAT,IAAkB,EAAjC,CAT4C;;EAU5C,MAAIC,QAAQ,GAAGL,QAAQ,CAACI,KAAT,IAAkB,EAAjC,CAV4C;;EAW5C,OAAK,IAAIpL,IAAT,IAAgBqL,QAAhB,EAA0B;EAAE;EACxB,QAAI,CAACF,QAAQ,CAACnL,IAAD,CAAb,EAAoB;EAChBK,MAAAA,EAAE,CAAC+K,KAAH,CAASpL,IAAT,IAAgB,EAAhB;EACH;EACJ,GAf2C;;;EAiB5C,OAAK,IAAIA,KAAT,IAAgBiL,QAAhB,EAA0B;EACtB,QAAIjL,KAAG,IAAI,OAAX,EAAoB;EAChB,WAAK,IAAIsL,SAAT,IAAsBL,QAAQ,CAACG,KAA/B,EAAsC;EAClC/K,QAAAA,EAAE,CAAC+K,KAAH,CAASE,SAAT,IAAsBL,QAAQ,CAACG,KAAT,CAAeE,SAAf,CAAtB;EACH;EACJ,KAJD,MAIO,IAAItL,KAAG,KAAK,OAAZ,EAAqB;EACxBK,MAAAA,EAAE,CAACkL,SAAH,GAAeN,QAAQ,CAACO,KAAxB;EACH,KAFM,MAEA;EACHnL,MAAAA,EAAE,CAACoL,YAAH,CAAgBzL,KAAhB,EAAqBiL,QAAQ,CAACjL,KAAD,CAA7B;EACH;EACJ;EACJ;;EAED,SAASyI,iBAAT,CAAyBJ,KAAzB,EAAgC;EAC5B,MAAI9I,CAAC,GAAG8I,KAAK,CAACD,IAAd;;EACA,MAAI,CAAC7I,CAAC,GAAGA,CAAC,CAACsF,IAAP,MAAiBtF,CAAC,GAAGA,CAAC,CAACmJ,IAAvB,CAAJ,EAAkC;EAC9BnJ,IAAAA,CAAC,CAAC8I,KAAD,CAAD,CAD8B;EAEjC;;EACD,MAAIA,KAAK,CAACM,iBAAV,EAA6B;EAAE;EAC3B,WAAO,IAAP;EACH;;EACD,SAAO,KAAP;EACH;;EAEM,SAASQ,SAAT,CAAmBd,KAAnB,EAA0B;EAAE;EAAF,MACvB7G,GADuB,GACgB6G,KADhB,CACvB7G,GADuB;EAAA,MAClBlB,QADkB,GACgB+H,KADhB,CAClB/H,QADkB;EAAA,MACRN,GADQ,GACgBqI,KADhB,CACRrI,GADQ;EAAA,MACHoI,IADG,GACgBC,KADhB,CACHD,IADG;EAAA,MACGtH,IADH,GACgBuH,KADhB,CACGvH,IADH;EAAA,MACS2G,EADT,GACgBY,KADhB,CACSZ,EADT;;EAE7B,MAAI,OAAOjG,GAAP,KAAe,QAAnB,EAA6B;EAAE;EAC3B;EACA,QAAIiH,iBAAe,CAACJ,KAAD,CAAnB,EAA4B;EACxB;EACA;EACA,aAAOA,KAAK,CAACM,iBAAN,CAAwB+C,GAA/B;EACH;;EACDrD,IAAAA,KAAK,CAAChI,EAAN,GAAWsL,QAAQ,CAACxD,aAAT,CAAuB3G,GAAvB,CAAX,CAPyB;;EAQzBsI,IAAAA,gBAAgB,CAACzB,KAAD,CAAhB;EACA/H,IAAAA,QAAQ,CAACR,OAAT,CAAiB,UAAAU,KAAK,EAAI;EAAE;EACxB6H,MAAAA,KAAK,CAAChI,EAAN,CAAS8J,WAAT,CAAqBhB,SAAS,CAAC3I,KAAD,CAA9B;EACH,KAFD;EAGH,GAZD,MAYO;EACH6H,IAAAA,KAAK,CAAChI,EAAN,GAAWsL,QAAQ,CAACC,cAAT,CAAwB9K,IAAxB,CAAX;EACH;;EAED,SAAOuH,KAAK,CAAChI,EAAb;EACH;;EC1MM,SAASwL,cAAT,CAAwBnG,GAAxB,EAA6B;EAChCA,EAAAA,GAAG,CAACc,SAAJ,CAAcsF,OAAd,GAAwB,UAASzD,KAAT,EAAgB;EACpC;EACA,QAAMZ,EAAE,GAAG,IAAX,CAFoC;EAKpC;EAEA;EAGA;;EACA,QAAMsE,SAAS,GAAGtE,EAAE,CAACuE,MAArB,CAXoC;;EAYpCvE,IAAAA,EAAE,CAACuE,MAAH,GAAY3D,KAAZ,CAZoC;;EAapC,QAAG,CAAC0D,SAAJ,EAAc;EACVtE,MAAAA,EAAE,CAACiE,GAAH,GAASxC,KAAK,CAACzB,EAAE,CAACiE,GAAJ,EAASrD,KAAT,CAAd,CADU;EAEb,KAFD,MAEK;EACDZ,MAAAA,EAAE,CAACiE,GAAH,GAASxC,KAAK,CAAC6C,SAAD,EAAW1D,KAAX,CAAd;EACH;EAEJ,GAnBD;EAoBH;EAEM,SAAS4D,QAAT,CAAkBxE,EAAlB,EAAqB5C,IAArB,EAA0B;EAAE;EAC/B,MAAMqH,QAAQ,GAAGzE,EAAE,CAACe,QAAH,CAAY3D,IAAZ,CAAjB;;EACA,MAAGqH,QAAH,EAAY;EACRA,IAAAA,QAAQ,CAACpM,OAAT,CAAiB,UAAAqM,OAAO;EAAA,aAAEA,OAAO,CAACC,IAAR,CAAa3E,EAAb,CAAF;EAAA,KAAxB;EACH;EACJ;EAGM,SAAS4E,cAAT,CAAwB5E,EAAxB,EAA4B;EAC/B;EAEA,MAAI6E,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EACxB7E,IAAAA,EAAE,CAACqE,OAAH,CAAWrE,EAAE,CAAC8E,OAAH,EAAX,EADwB;;EAE3B,GAFD;;EAGA,MAAI/E,OAAJ,CAAYC,EAAZ,EAAgB6E,eAAhB,EAAiC,YAAM,EAAvC,EAA2C,IAA3C,EAN+B;EAOlC;;ECxCD,IAAIE,oBAAoB,GAAGC,KAAK,CAACjG,SAAjC;;EAIO,IAAIkG,YAAY,GAAGzH,MAAM,CAACC,MAAP,CAAcuH,KAAK,CAACjG,SAApB,CAAnB;EACP,IAAImG,OAAO,GAAG;EACV,MADU,EAEV,KAFU,EAGV,OAHU,EAIV,SAJU,EAKV,QALU,EAMV,SANU,EAOV,MAPU,CAAd;EAUAA,OAAO,CAAC7M,OAAR,CAAgB,UAAA8M,MAAM,EAAE;EAAI;EACxBF,EAAAA,YAAY,CAACE,MAAD,CAAZ,GAAuB,YAAmB;EAAA;;EAAA,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EAAE;EACxC;EACA;EACA,QAAIC,MAAM,GAAG,yBAAAN,oBAAoB,CAACI,MAAD,CAApB,EAA6BR,IAA7B,+BAAkC,IAAlC,SAA0CS,IAA1C,EAAb;;EACA,QAAIE,QAAJ;EACA,QAAIC,EAAE,GAAG,KAAKC,MAAd;;EACA,YAAQL,MAAR;EACI,WAAK,MAAL;EACA,WAAK,SAAL;EACIG,QAAAA,QAAQ,GAAGF,IAAX;EACA;;EACJ,WAAK,QAAL;EAAe;EACXE,QAAAA,QAAQ,GAAGF,IAAI,CAAC1M,KAAL,CAAW,CAAX,CAAX;EANR;;EAUA,QAAG4M,QAAH,EAAcC,EAAE,CAACE,YAAH,CAAgBH,QAAhB;EACdC,IAAAA,EAAE,CAAChF,GAAH,CAAOmF,MAAP;EACA,WAAOL,MAAP;EACH,GAnBD;EAoBH,CArBD;;MCZMM;EACF,oBAAYxN,KAAZ,EAAmB;EAAA;;EAAE;EACjB;EACA;EACA,SAAKoI,GAAL,GAAW,IAAItB,GAAJ,EAAX,CAHe;;EAIfzB,IAAAA,MAAM,CAACoI,cAAP,CAAsBzN,KAAtB,EAA4B,QAA5B,EAAqC;EACjCA,MAAAA,KAAK,EAAC,IAD2B;EAEjC0N,MAAAA,UAAU,EAAC,KAFsB;EAEf;EAClBC,MAAAA,YAAY,EAAC,KAHoB;;EAAA,KAArC;;EAKA,QAAGd,KAAK,CAACe,OAAN,CAAc5N,KAAd,CAAH,EAAwB;EACpB;EACA;EACAqF,MAAAA,MAAM,CAACwI,cAAP,CAAsB7N,KAAtB,EAA4B8M,YAA5B,EAHoB;;EAIpB,WAAKQ,YAAL,CAAkBtN,KAAlB,EAJoB;EAKvB,KALD,MAKK;EACD,WAAK8N,IAAL,CAAU9N,KAAV;EACH;EACJ;;;;mCACYA,OAAM;EACf,WAAI,IAAIL,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGK,KAAK,CAACJ,MAAzB,EAAgCD,CAAC,EAAjC,EAAoC;EAAE;EAClCoO,QAAAA,OAAO,CAAC/N,KAAK,CAACL,CAAD,CAAN,CAAP;EACH;EACJ;;;2BACI6I,MAAM;EACP;EACAnD,MAAAA,MAAM,CAAC2I,IAAP,CAAYxF,IAAZ,EAAkBtI,OAAlB,CAA0B,UAACE,GAAD,EAAS;EAC/B6N,QAAAA,cAAc,CAACzF,IAAD,EAAOpI,GAAP,EAAYoI,IAAI,CAACpI,GAAD,CAAhB,CAAd;EACH,OAFD;EAGH;;;;;;EAEL,SAAS8N,WAAT,CAAqBlO,KAArB,EAA2B;EAAE;EACzB,OAAI,IAAIL,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGK,KAAK,CAACJ,MAA1B,EAAiCD,CAAC,EAAlC,EAAqC;EACjC,QAAIwO,OAAO,GAAGnO,KAAK,CAACL,CAAD,CAAnB;EACAwO,IAAAA,OAAO,CAACd,MAAR,IAAkBc,OAAO,CAACd,MAAR,CAAejF,GAAf,CAAmBgG,MAAnB,EAAlB,CAFiC;;EAGjC,QAAGvB,KAAK,CAACe,OAAN,CAAcO,OAAd,CAAH,EAA0B;EACtBD,MAAAA,WAAW,CAACC,OAAD,CAAX;EACH;EACJ;EACJ;;EACM,SAASF,cAAT,CAAwBzF,IAAxB,EAA8BpI,GAA9B,EAAmCJ,KAAnC,EAA0C;EAAE;EAC/C;EACA,MAAIqO,OAAO,GAAGN,OAAO,CAAC/N,KAAD,CAArB,CAF6C;;EAG7C,MAAIoI,GAAG,GAAG,IAAItB,GAAJ,EAAV,CAH6C;;EAI7CzB,EAAAA,MAAM,CAACoI,cAAP,CAAsBjF,IAAtB,EAA2BpI,GAA3B,EAA+B;EAAE;EAC7B+H,IAAAA,GAD2B,iBACtB;EACD,UAAGrB,GAAG,CAACE,MAAP,EAAc;EACVoB,QAAAA,GAAG,CAACgG,MAAJ,GADU;EAEV;;EACA,YAAGC,OAAH,EAAW;EAAE;EACTA,UAAAA,OAAO,CAACjG,GAAR,CAAYgG,MAAZ;;EACA,cAAGvB,KAAK,CAACe,OAAN,CAAc5N,KAAd,CAAH,EAAwB;EACpBkO,YAAAA,WAAW,CAAClO,KAAD,CAAX;EACH;EACJ;EACJ;;EACD,aAAOA,KAAP;EACH,KAb0B;EAc3BsO,IAAAA,GAd2B,eAcvBC,QAduB,EAcd;EACT,UAAGA,QAAQ,KAAKvO,KAAhB,EAAuB;EACvB+N,MAAAA,OAAO,CAACQ,QAAD,CAAP,CAFS;;EAGTvO,MAAAA,KAAK,GAAGuO,QAAR;EAEAnG,MAAAA,GAAG,CAACmF,MAAJ,GALS;EAMZ;EApB0B,GAA/B;EAsBH;EACM,SAASQ,OAAT,CAAiBvF,IAAjB,EAAuB;EAC1B;EACA,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAxC,EAA8C;EAC1C;EACH;;EACD,MAAGA,IAAI,CAAC6E,MAAR,EAAe;EAAE;EACb;EACH,GAPyB;;;EAS1B,SAAO,IAAIG,QAAJ,CAAahF,IAAb,CAAP;EACH;;EC7EM,SAASgG,SAAT,CAAmB3G,EAAnB,EAAsB;EACzB;EACA,MAAM4G,IAAI,GAAG5G,EAAE,CAACe,QAAhB,CAFyB;;EAGzB,MAAG6F,IAAI,CAACjG,IAAR,EAAa;EAAE;EACXkG,IAAAA,QAAQ,CAAC7G,EAAD,CAAR;EACH;EACJ;;EACD,SAAS8G,KAAT,CAAe9G,EAAf,EAAkB+G,MAAlB,EAAyBxO,GAAzB,EAA6B;EACzBiF,EAAAA,MAAM,CAACoI,cAAP,CAAsB5F,EAAtB,EAAyBzH,GAAzB,EAA6B;EACzB+H,IAAAA,GADyB,iBACpB;EACD,aAAON,EAAE,CAAC+G,MAAD,CAAF,CAAWxO,GAAX,CAAP;EACH,KAHwB;EAIzBkO,IAAAA,GAJyB,eAIrBC,QAJqB,EAIZ;EACT1G,MAAAA,EAAE,CAAC+G,MAAD,CAAF,CAAWxO,GAAX,IAAkBmO,QAAlB;EACH;EANwB,GAA7B;EAQH;;EACD,SAASG,QAAT,CAAkB7G,EAAlB,EAAqB;EACjB;EACA,MAAIW,IAAI,GAAGX,EAAE,CAACe,QAAH,CAAYJ,IAAvB,CAFiB;;EAIjBA,EAAAA,IAAI,GAAGX,EAAE,CAACgH,KAAH,GAAW,OAAOrG,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACgE,IAAL,CAAU3E,EAAV,CAA7B,GAA2CW,IAA7D,CAJiB;EAOjB;;EACA,OAAI,IAAIpI,GAAR,IAAeoI,IAAf,EAAoB;EAChBmG,IAAAA,KAAK,CAAC9G,EAAD,EAAI,OAAJ,EAAYzH,GAAZ,CAAL,CADgB;EAEnB,GAVgB;;;EAYjB2N,EAAAA,OAAO,CAACvF,IAAD,CAAP;EACH;;EC5BM,SAASsG,SAAT,CAAmBhJ,GAAnB,EAAuB;EAE1B;EAEAA,EAAAA,GAAG,CAACc,SAAJ,CAAcD,KAAd,GAAsB,UAAUnB,OAAV,EAAmB;EAAE;EACvC,QAAMqC,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACe,QAAH,GAAcrD,YAAY,CAACsC,EAAE,CAAChB,WAAH,CAAerB,OAAhB,EAAwBA,OAAxB,CAA1B,CAFqC;EAIrC;;EACA6G,IAAAA,QAAQ,CAACxE,EAAD,EAAI,cAAJ,CAAR;EACA2G,IAAAA,SAAS,CAAC3G,EAAD,CAAT;EACAwE,IAAAA,QAAQ,CAACxE,EAAD,EAAI,SAAJ,CAAR;;EAEA,QAAGA,EAAE,CAACe,QAAH,CAAYnI,EAAf,EAAkB;EAAE;EAChBoH,MAAAA,EAAE,CAACoB,MAAH,CAAUpB,EAAE,CAACe,QAAH,CAAYnI,EAAtB;EACH;EACJ,GAZD;;EAaAqF,EAAAA,GAAG,CAACc,SAAJ,CAAcmI,SAAd,GAA0B3K,QAA1B;;EACA0B,EAAAA,GAAG,CAACc,SAAJ,CAAcqC,MAAd,GAAuB,UAAUxI,EAAV,EAAc;EACjCA,IAAAA,EAAE,GAAGA,EAAE,IAAKsL,QAAQ,CAACiD,aAAT,CAAuBvO,EAAvB,CAAZ;EACA,QAAMoH,EAAE,GAAG,IAAX;EACA,QAAMrC,OAAO,GAAGqC,EAAE,CAACe,QAAnB;EACAf,IAAAA,EAAE,CAACiE,GAAH,GAASrL,EAAT,CAJiC;EAMjC;EACA;;EAEA,QAAG,CAAC+E,OAAO,CAAC3B,MAAZ,EAAmB;EACf,UAAIF,QAAQ,GAAG6B,OAAO,CAAC7B,QAAvB;;EACA,UAAG,CAACA,QAAD,IAAalD,EAAhB,EAAmB;EACfkD,QAAAA,QAAQ,GAAGlD,EAAE,CAACwO,SAAd,CADe;EAElB,OAJc;;;EAMf,UAAMpL,MAAM,GAAIH,kBAAkB,CAACC,QAAD,CAAlC,CANe;;EAOf6B,MAAAA,OAAO,CAAC3B,MAAR,GAAiBA,MAAjB;EACH;;EACD4I,IAAAA,cAAc,CAAC5E,EAAD,CAAd,CAlBiC;EAoBpC,GApBD;EAqBH;;EC1CM,SAASqH,WAAT,CAAqBpJ,GAArB,EAA0B;EAC7BA,EAAAA,GAAG,CAACc,SAAJ,CAAcuI,EAAd,GAAmB,YAAkB;EAAA,sCAANlC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EAAE;EACnC,WAAO1E,aAAa,MAAb,UAAc,IAAd,SAAsB0E,IAAtB,EAAP;EACH,GAFD;;EAGAnH,EAAAA,GAAG,CAACc,SAAJ,CAAcwI,EAAd,GAAmB,UAASlO,IAAT,EAAe;EAAE;EAChC,WAAOgI,eAAe,CAAC,IAAD,EAAMhI,IAAN,CAAtB;EACH,GAFD;;EAGA4E,EAAAA,GAAG,CAACc,SAAJ,CAAcyI,EAAd,GAAmB,UAAS3K,GAAT,EAAc;EAAE;EAC/B,WAAOA,GAAG,IAAI,IAAP,GAAc,EAAd,GAAoB,QAAOA,GAAP,KAAc,QAAf,GAA2BrE,IAAI,CAACC,SAAL,CAAeoE,GAAf,CAA3B,GAAiDA,GAA3E;EACH,GAFD;;EAGAoB,EAAAA,GAAG,CAACc,SAAJ,CAAc+F,OAAd,GAAwB,YAAW;EAC/B;EACA,QAAM9E,EAAE,GAAG,IAAX;EACA,QAAIhE,MAAM,GAAGgE,EAAE,CAACe,QAAH,CAAY/E,MAAzB,CAH+B;EAK/B;;EACA,QAAI4E,KAAK,GAAG5E,MAAM,CAAC2I,IAAP,CAAY3E,EAAZ,CAAZ,CAN+B;;EAQ/B,WAAOY,KAAP,CAR+B;EAU/B;EACH,GAXD;EAYH;;ECxBD;;EASA,SAAS3C,GAAT,CAAaN,OAAb,EAAsB;EAClB,OAAKmB,KAAL,CAAWnB,OAAX,EADkB;;EAErB;;;EAGDsJ,SAAS,CAAChJ,GAAD,CAAT;;EACAmG,cAAc,CAACnG,GAAD,CAAd;;EACAoJ,WAAW,CAACpJ,GAAD,CAAX;;EAGAD,aAAa,CAACC,GAAD,CAAb;;;;;;;;;"}